{# {% set navPages = collections.all | eleventyNavigation %}
{% set entryUrl = page.url.split("/")[1] %} #}

{%- import "darkmode.njk" as darkmode -%}

<nav
  class="fixed top-0 left-0 right-0 z-50 transition duration-300 transform pt-10 lg:pt-20 pb-2 sm:pb-4 border-b border-transparent px-4"
  x-data="{ showNav: false, showPref: false, atTop: true}"
  @scroll.window="atTop = (window.pageYOffset > 30) ? false : true"
  :class="{
    'bg-transparent shadow-none sm:translate-y-0' : atTop,
    'bg-white dark:bg-black border-gray-200 dark:border-gray-800 shadow-xl -translate-y-8 sm:-translate-y-6  lg:-translate-y-16' : !atTop
  }"
>

  <div class="flex items-center justify-between mx-auto max-w-xl md:max-w-2xl lg:max-w-3xl xl:max-w-4xl">

    <a href="/" class="text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight tracking-tight transition-colors duration-300 outline-none text-blue-600 text-gradient bg-gradient-to-br from-green-500 to-blue-500 dark:from-blue-600 dark:to-purple-500 border-b-4 border-transparent focus:border-gray-300 dark:focus:border-gray-400"
    {# :class="{
      'text-blue-600 hover:text-green-600' : atTop,
      'text-green-500 dark:text-green-600 hover:text-blue-600' : !atTop
    }" #}
    >{{ site.authorName }}</a>

    <ul class="flex">
      <li class="relative ml-2">
        <button
          @click="showPref = !showPref"
          @click.away="showPref = false"
          x-bind:aria-label="showPref ? 'Menu sluiten' : 'Menu openen'"
          x-bind:aria-expanded="showPref"
          class="button

          border-yellow-200 hover:border-blue-600 focus:border-blue-600
          dark:border-blue-900 dark:hover:border-blue-700 dark:focus:border-blue-700
          text-yellow-400 hover:text-yellow-400 dark:text-yellow-500
           bg-gradient-to-br from-white to-white
           dark:from-purple-800 dark:to-blue-800
        ">
          <svg class="icon-sun h-8 w-8 relative z-10" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
          <svg class="icon-moon h-6 w-6 m-1 relative z-10" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
          <div class="bg-gradient-to-b from-blue-400 to-blue-500 dark:from-purple-800 dark:to-blue-800"></div>
        </button>
        <div class="absolute top-100 right-0 w-36 opacity-0 transform transition-all duration-300"
          :aria-expanded="showPref"
          {# :hidden="!showPref" #}
          :class= "{
            'mt-4' : atTop,
            'mt-4 sm:mt-6' : !atTop,
            'translate-y-0 opacity-100' : showPref,
            'translate-y-8 pointer-events-none' : !showPref
          }"
        >
          {{ darkmode.switcher() }}
        </div>
      </li>
      <li class="relative ml-2">
        <button
          @click="showNav = !showNav"
          @click.away="showNav = false"
          x-bind:aria-label="showNav ? 'Menu sluiten' : 'Menu openen'"
          x-bind:aria-expanded="showNav"
          class="button text-white
          border-blue-600 hover:border-blue-700 focus:border-blue-700
          dark:border-purple-600 dark:hover:border-blue-700 dark:focus:border-blue-700
          bg-gradient-to-br
          from-blue-400 to-purple-600
          dark:from-pink-600 dark:to-purple-600
        ">
          <svg :class="{ 'hidden': showNav, 'block': !showNav }" class="block h-8 w-8 relative z-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <svg :class="{ 'block': showNav, 'hidden': !showNav }" class="hidden h-8 w-8 relative z-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          <div class="bg-gradient-to-br from-green-500 to-blue-600 dark:from-blue-400 dark:to-purple-600"></div>
        </button>
        <div class="absolute top-100 right-0 w-36 opacity-0 transform transition-all duration-300"
          :aria-expanded="showNav"
          {# :hidden="!showNav" #}
          :class= "{
            'mt-4' : atTop,
            'mt-4 sm:mt-6' : !atTop,
            'translate-y-0 opacity-100' : showNav,
            'translate-y-8 pointer-events-none' : !showNav
          }">
          {{ collections.all | eleventyNavigation | eleventyNavigationToHtml(
            {
              listClass: "rounded-lg shadow-xl bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600",
              listItemClass: "block relative w-full font-medium cursor-pointer border-t-2 border-gray-300 first:border-0 dark:border-gray-600",
              listItemHasChildrenClass: "nav-parent",
              anchorClass: "block py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",
              activeListItemClass: "",
              activeAnchorClass: "text-pink-600 dark:text-pink-600 font-bold",
              activeKey: eleventyNavigation.key
            }
          ) | safe }}
        </div>
      </li>
    </ul>
  </div>

</nav>
