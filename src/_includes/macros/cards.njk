{% macro tag(
  tagName = "",
  classes= "font-bold text-xs uppercase inline-block mr-1 text-sky-900 hover:text-lavender-700 transition-colors duration-150"
) %}
  <a href="/blog/tags/{{ tagName }}/" class="{{ classes }}">#{{ tagName }}</a>
{% endmacro %}

{% macro tags(
  tags = ""
) %}
  {%- for postTag in tags -%}
    {%- if
      ('all' not in postTag) and
      ('nav' not in postTag) and
      ('post' not in postTag) and
      ('posts' not in postTag) and
      ('promo' not in postTag)
    -%}
      {{ tag( tagName = postTag ) }}
    {%- endif -%}
  {%- endfor -%}
{% endmacro %}

{% macro list(
  postTitle = "",
  postUrl = "",
  postDate = "",
  postTags = "",
  customTag = ""
) %}
  <div class="flex flex-col lg:block leading-none py-4 sm:pb-2 border-t-2 border-gray-300 border-opacity-25 w-full">
    <time class="inline-block font-medium text-sm text-cool-gray-900 text-opacity-75 lowercase w-full md:w-36 mb-2" datetime="{{ postDate | htmlDateString }}">
    {% set isPromo = false %}
    {%- for postTag in postTags -%}
      {%- if 'promo' in postTag -%}
        {% set isPromo = true %}
      {%- endif -%}
    {%- endfor -%}
    {% if isPromo %}
      {% if customTag %}<span class="font-bold text-sm uppercase inline-block rounded-full bg-pink-500 text-pink-50 px-2 py-1 mr-4 text-center lg:transform lg:-translate-y-1">{{ customTag }}</span>{% endif %}
    {% else %}
      {{ postDate | readableDate }}
    {% endif %}
    </time>
    <a href="{{ postUrl }}" class="inline-block font-bold text-lg sm:text-xl lg:text-2xl text-cool-gray-800 hover:underline hover:text-opacity-75 mr-1 md:mr-3 mb-2">{{ postTitle }}</a>
    <div class="lg:inline-block">{{ tags( tags = postTags ) }}</div>
  </div>
{% endmacro %}


{% macro post(
  postTitle = "",
  postUrl = "",
  postDate = "",
  postTags = "",
  customTag = "",
  excerpt = "",
  postContent = "",
  featured_image = "",
  image_caption = "",
  hide_image = "",
  image_position = ""
) %}
  <div class="block leading-none py-4 sm:pb-2 pt-6 border-t-2 border-gray-300 border-opacity-25 w-full ">
    <h2 class="font-extrabold leading-none text-3xl lg:text-4xl mb-2 lg:mb-4"><a href="{{ postUrl }}" class="inline-block text-cool-gray-800 hover:underline hover:text-opacity-75">{{ postTitle }}</a></h2>

    <div class="flex justify-start items-end mb-2 lg:mb-3">
      <time class="flex-initial font-medium text-sm text-cool-gray-900 text-opacity-75 lowercase mr-4" datetime="{{ postDate | htmlDateString }}">
    {% set isPromo = false %}
    {%- for postTag in postTags -%}
      {%- if 'promo' in postTag -%}
        {% set isPromo = true %}
      {%- endif -%}
    {%- endfor -%}
    {% if isPromo %}
      {% if customTag %}<span class="font-bold text-sm uppercase rounded-full bg-pink-500 text-pink-50 px-3 mr-4">{{ customTag }}</span>{% endif %}
    {% else %}
      {{ postDate | readableDate }}
    {% endif %}</time>


    <div class="flex-initial">{{ tags( tags = postTags ) }}</div>
    </div>
  </div>

  {% set markdownClasses = "" %}
  {% if image_position == "aside" %}
    {% set markdownClasses = "markdown--aside" %}
  {% endif %}

  <div class="markdown w-full {{ markdownClasses }}">
    {% if not hide_image %}
    {% if featured_image %}
      <div class="featured_image">
        <img src="{{ featured_image }}" alt="{{ image_caption }}" class="lazyload">
      </div>
    {% endif %}
    {% endif %}
    {% if excerpt %}
      <div>
        {% set excerptContent = excerpt | markdownify %}
        <div class="prose">{{ excerptContent | safe }}</div>
        <div class="my-6">
          <a href="{{ postUrl }}" class="text-flamingo-600 underline font-semibold hover:no-underline hover:text-flamingo-800">Lees verder</a>
        </div>
      </div>

    {% else %}
      <div class="prose">{{ postContent | safe }}</div>
    {% endif %}
  </div>
{% endmacro %}
