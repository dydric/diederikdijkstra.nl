{%- import "macros/menu.njk" as menu -%}

<header class="fixed w-full z-30 py-3 sm:py-4 transition-all duration-200 ease-in-out"

  :class="{
      'bg-secondary shadow-2xl' : !atTop,
      'bg-transparent ' : atTop
    }"

   @scroll.window="atTop = (window.pageYOffset > 40) ? false : true"

  >
  <div class="max-w-screen-xl px-4 md:px-6 mx-auto flex items-center ease-in-out transform"

    :class="{
      'translate-y-0 duration-150' : !atTop,
      'sm:translate-y-12 duration-300' : atTop,
      'transition-none' : isPreload
    }"
  >
    <div class="flex-auto mr-8">
      <h1 class="font-extrabold leading-none text-lg sm:text-3xl text-lavender-700 mb-0">
        <a href="/" class="text-site-title hover:opacity-90">{{ site.title }}</a>
      </h1>
    </div>

    <div class="flex-initial relative">
      <button
        @click="showPref = !showPref"
        @click.away="showPref = false"
        x-bind:aria-label="showPref ? 'Menu sluiten' : 'Menu openen'"
        x-bind:aria-expanded="showPref"
        {# :class="{
          'text-champagne-400 ': preference == 'dark',
          'text-lavender-800 ': preference == 'light',
          'text-sky-700': preference != 'light' && preference != 'dark'
        }" #}
        class="text-accent-primary inline-flex items-center p-1 bg-transparent rounded-lg border-2 border-transparent hover:border-accent focus:border-accent focus:outline-none">

        <svg class="h-8 w-8"
          {# :class="{
            'hidden': preference == 'dark',
            'hidden ': preference == 'light',
            'block': preference != 'light' && preference != 'dark'
          }" #}
         xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
        </svg>

        {# <svg class="h-6 w-6 m-1"
          :class="{
            'hidden': preference == 'dark',
            'block': preference == 'light',
            'hidden': preference != 'light' && preference != 'dark'
          }"
        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.663 11h4.673M2.464 9.536a5 5 0 117.072 0l-.548.547A3.375 3.375 0 008 12.469V13a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
        </svg> #}

      </button>
      <div
          :aria-expanded="showPref"
          :hidden="!showPref"
          class="absolute top-100 left-50 w-32 bg-secondary rounded-lg overflow-hidden mt-2 shadow-2xl transform -translate-x-1/2 border-2 border-primary"
          :class="{
              'mt-6' : !atTop,
              'mt-2' : atTop
            }"
        >
          {{ menu.system() }}
        </div>
    </div>

    <div class="flex-initial text-right mx-2 sm:mr-0">
      <a href="mailto:diederikdijkstra@icloud.com" target="_blank" rel="noopener noreferrer" class="inline-flex items-center p-2 sm:px-4 sm:py-2 text-base leading-4 font-medium rounded-md text-white bg-lavender-700 hover:bg-lavender-800 focus:outline-none focus:border-lavender-800 focus:shadow-outline-lavender active:bg-lavender-800 transition ease-in-out duration-150 shadow-lg border-2 border-lavender-800">
          <svg class="h-6 w-6 sm:-ml-1 sm:mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
          </svg>
          <span class="hidden sm:inline">Contact</span>
      </a>

    </div>
    <div class="flex-initial text-right">

      <button
        @click="showNav = !showNav"
        @click.away="showNav = false"
        class="sm:hidden inline-flex items-center p-1 bg-primary rounded-lg border-2 text-menu-link-active border-transparent hover:border-accent focus:border-accent focus:outline-none"

        :class="{
          'border-accent' : showNav,
          'border-primary' : !atTop,
          'shadow-lg ' : atTop
        }"
        x-bind:aria-label="showNav ? 'Menu sluiten' : 'Menu openen'"
        x-bind:aria-expanded="showNav"
      >
        <!-- Icon when menu is closed. -->
        <svg
          :class="{ 'hidden': showNav, 'block': !showNav }"
          class="block h-8 w-8"
          fill="none" viewBox="0 0 24 24" stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <!-- Icon when menu is showNav. -->
        <svg
          :class="{ 'block': showNav, 'hidden': !showNav }"
          class="hidden h-8 w-8"
          fill="none" viewBox="0 0 24 24" stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>

      </button>

    </div>
  </div>
</header>
